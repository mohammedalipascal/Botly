# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# Platform.sh / Upsun Application Configuration
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

name: whatsapp-bot

type: nodejs:20

# â­ Ø¨Ø¯ÙˆÙ† disk - Upsun Ø¨ÙŠØ¯ÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
# Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… size
size: S

# Web server
web:
  commands:
    start: "node index.js"
  
  upstream:
    socket_family: tcp
    protocol: http
  
  locations:
    "/":
      root: ""
      passthru: true
      allow: false

# Persistent storage
mounts:
  auth_info:
    source: storage
    source_path: auth_info
  logs:
    source: storage
    source_path: logs

# Build and deploy hooks
hooks:
  build: |
    set -e
    echo "ğŸ“¦ Installing dependencies..."
    npm ci --only=production
    echo "âœ… Build complete!"
  
  deploy: |
    set -e
    echo "ğŸš€ WhatsApp Bot deployed!"

# Environment variables
variables:
  env:
    NODE_ENV: production
    PORT: 8080
